{"pages":[{"title":"About","text":"An explorer, interested in neuroscience, psychology and artificial intelligence. Neurospider作为个人网站，所有内容都是我的个人实践的一些分享，不属于教程。欢迎各位同道批评指正或者一同交流。 欢迎你在GitHub上与我交流 或者通过邮件与我交流：geebingshaw@qq.com","link":"/about/index.html"},{"title":"acf2022","text":"Proof-of-ACF-in-Online-Submission-System 下载","link":"/acf2022/index.html"},{"title":"categories","text":"","link":"/categories/index.html"},{"title":"Methods","text":"认知神经 可视化 全部文章","link":"/methods/index.html"},{"title":"CV","text":"#header { display:none!important; } .boxed #wrapper, .container-inner{max-width:870px!important;} #page{margin-top:1em!important; margin-bottom:2em!important;} #footer{display:none;} .sidebar.s1 .sidebar-toggle, .sidebar.s1 .sidebar-top{display:none;} #page .container-inner{box-shadow:0px 0px 4px 3px rgb(0 0 0 / 10%);} .page-title{display:none!important;} .wp-block-columns .entry dd, .entry p{margin-bottom:0.3em!important;} .hr,hr{margin:0;} .wp-block-image,.wp-block-columns {margin-bottom:0!important;} .wp-block-image img{position:absolute; right:0; top:1em;} .fa,.fas {position:absolute; right:0; bottom:0.5em;font-size:2em; } .entry table td, .entry table th {text-align:left;border-bottom:none;padding:0px;} .entry table {font-size:inherit;} .box1{display: block;} .wp-block-columns{display:none;} @media only screen and (max-width: 768px){.box1{display: none !important;} .wp-block-columns{display:flex!important;} .wp-block-image{display:block!important;} .wp-block-image img{top:0.8em!important;}} body{color:#1f1f1f;} a, abbr, acronym, address, applet, article, aside, audio, b, big, blockquote, body, canvas, caption, center, cite, code, dd, del, details, dfn, div, dl, dt, em, embed, fieldset, figcaption, figure, footer, form, h1, h2, h3, h4, h5, h6, header, hgroup, html, i, iframe, img, ins, kbd, label, legend, li, mark, menu, nav, object, ol, output, p, pre, q, ruby, s, samp, section, small, span, strike, sub, summary, sup, table, tbody, td, tfoot, th, thead, time, tr, tt, u, ul, var, video{font-size:16px; line-height:1.6em!important; } .entry ol ul li, .entry ul li{list-style:disc!important;margin-bottom:0.25em;} strong{font-weight:bold;} *{font-family:”arial”,”Microsoft YaHei”;} .wp-block-separator{margin-bottom:5px;} .entry ol, .entry ul{margin: 0 0 0 25px;} 肖治兵 年龄：27 电话：13368065191 邮箱：geebingshaw@qq.com 网站：neurospider.cn 肖治兵年龄：27 电话：13368065191 邮箱：geebingshaw@qq.com 网站：neurospider.cn 研究领域：成瘾与决策；多模态数据挖掘；机器学习；认知神经工具包开发 教育背景 2019-2022年 西南大学 心理学 硕士 导师：何清华教授 2014-2018年 西南大学 心理学 学士 科研技能 熟练掌握SPM, DPABI, Gretna, Pronto, Brainnetviewer, BrainNetClass等多种磁共振处理软件，熟悉多模态数据分析（包括脑网络图论分析，任务态GLM分析，组水平/个体水平的结构脑网络分析等）。直接收集大学生磁共振数据120例以上，有一定的数据收集经验。 熟练掌握MATLAB，E-Prime, Psychopy, VB等编程软件，包括编制实验程序，数据处理，纯代码形式的机器学习分类与回归，以及GUI开发，**开发了脑电信号处理工具包ESB，认知神经机器学习工具包NS_CPM**。熟悉SPSS、JASP、Mplus等统计软件，包括高级统计建模，例如交叉滞后模型、潜增长模型等。 熟悉脑电分析，包括时域分析、频域分析、静息态功能连接分析以及表征相似性分析(RSA)。 熟悉服务器运维，为实验室搭建了稳定易用的数据分析服务器，创建了决策神经科学与成瘾实验室网站(http://he-lab.cn)。 有英文论文撰写和发表经验。CET-6，522分。 科研活动 深度、全程参与中国人人格特质脑影像-行为研究项目，作为该项目实施的五个管理人之一。该项目由西南大学五个PI（陈红、冯廷勇、何清华、雷旭、邱江）合作进行，实际收集磁共振数据2200份以上，行为测试10000人次以上，实验数据和问卷数据超过50万份。 参与项目策划 (2019.5—2019.9) 与其余四个实验室的负责人一起规划整体测验实施的全部环节。 设计行为测验方案，并为其**编写 测验数据收集、管理程序系统**，实现程序融合、数据收集、校验、传输、归档和报告的自动化。 负责行为测验全部环节 (2019.5—至今) 包括商定项目测验内容，编制测验程序，安排测验，培训主试，协调主试团队，准备与统筹物资，收集数据以及监控数据收集质量。 协助质量控制 (2019.9—至今) 协助制定全局质控方案，带领本团队人员制定内部的质控标准，定期进行数据质量评定。 负责数据管理（2019.9—至今） 负责全部行为数据的管理以及团队内部磁共振数据的管理，指导团队人员使用数据。 创建了认知神经科学原创内容网站NeuroSpider.cn (2021.1—至今）。 NS_CPM - 个人开发认知神经机器学习分析图形化工具包 (2021)。 ESB - 个人开发脑电分析图形化工具包(本科实习期间，自学脑电和MATLAB，并编写该工具包。2017)。 整合Psychopy，Psychojs和自建WEB的在线行为实验方案(Demo)，应对国内无法使用pavlovia的问题 (2021)。 开展关于新冠疫情对跨期决策的影响及其影像连接组特征的研究，相关成果发表在TOP期刊《Cerebral Cortex》上 (2022）。 开展关于吸烟成瘾与网络成瘾者情绪性决策的任务态脑影像研究 （2019.9—至今）。 负责实验设计、脑影像与行为数据收集，数据分析与论文撰写。 利用_Allen Brain_数据库进行成瘾者决策异常的转录组-影像空间关联分析 (2021.9—至今)。 个人总结 有四年密集的编程经历，能够应对认知神经科学中较多场景的编程以及数据分析需求，研究生期间为实验室提供了较多的技术支持。熟悉磁共振、脑电等研究方法，爱好剖析数据，通过对数据的解构，对神经影像/生理数据有了更深入的认识。对认知神经科学有很高的热情，对新方法的接受度比较高，学习快。希望在将来的研究中，能够多角度多层次的探究心脑交互机制。 发表文章 Xiao, Z., Chen, Z., Chen, W., Gao, W., He, L., Wang, Q., … &amp; He, Q. (2022). Maladaptive changes in delay discounting in males during the COVID-19 pandemic: The predictive role of functional connectome. Cerebral Cortex, bhab505, https://doi.org/10.1093/cercor/bhab505. 中科院SCI一区，TOP期刊 Liu, X., Turel, O., Xiao, Z., He, J., &amp; He, Q. (2021). Impulsivity and neural mechanisms that mediate preference for immediate food rewards in people with vs without excess weight. Appetite, 105798. https://doi.org/10.1016/j.appet.2021.105798. 中科院SCI二区 Chen, W., Xiao, Z., Turel, O., &amp; He, Q. (2021). Sex-based differences in fairness norm compliance and neural circuitry. Fundamental Research. Under review.","link":"/mypage/index.html"},{"title":"tags","text":"","link":"/tags/index.html"},{"title":"Tools","text":"Developed by NeuroSpiderESB - Easy batch for EEG: 一个用于EEGlab批处理的工具 , 整合了EEGLAB批处理，RECORE个体分析、组分析等… Neuroscience Toolshttps://brain-map.org HALFpipe —— 自动化任务态、静息态处理包 GraphVar —— 图论与功能分析工具包 Other Tools","link":"/tools/index.html"}],"posts":[{"title":"BrainNetClass：一个新兴脑信号分类机器学习工具包","text":"BrainNetClass是一个2020年发布的集网络构建、特征输出、特征选择、交叉验证和支持向量机(libsvm)分类一体的工具包。 BrainNetClass 确实如其初衷一样，非常的便捷！但值得注意的是， BrainNetClass 只能用于分类，而且是二分类，不支持多分类(GUI模式)，不支持回归（除非用batch模式大改）。但是对于做二元分类来说，比如区分疾病与健康被试，是很便捷的。 另一个方面，由于其便捷性，可能会导致使用者测试了所有参数，而最后只报告显著的结果。但这也是目前的阶段很难避免的问题。 其界面如下： BrainNetClass 只需要三个输入选项：Data Input（数据路径），Label Inpute（分类标签路径），Output Directory（输出路径）。 输入数据为ROI signals，通常就是预处理过后每个ROI的平均BOLD信号。使用GUI的情况下，Label只能是1和-1两个值用来表示分组标签。 这一部分非常简单，参看手册即可。 对于参数选择有4个部分：网络构建，特征输出，特征选择，模型评估 网络构建 我们的输入数据是ROI signals，需要构建网络，最常见的方法是计算皮尔逊相关系数，来表示两个节点之间在时间上的活动的相似性，从而构成无方向的脑网络。这是最常见也是最容易理解的网络构建方式。 构建网络还有很多其它的方式， BrainNetClass 就提供了无参数的构建方式：PC，aHOFC，tHOFC，和需要超参数的SR，GSR，WSR，WSGR，SGR，SSGSR，SLR和dHOFC。这些构建方式的用途在manual中可见，更详细的在他们的论文（Zhou，et. al., 2020)中可见。其中PC就是皮尔逊相关。 特征输出 即网络构建之后，用什么参数或者指标作为特征，例如选择常见的相关系数r。在无参数的构建方式下，我们可以选择相关系数r，或者局部聚类系数（local clustering coefficient，这是一个图论指标）。 事实上特征输出并不局限于此，任何你们计算的ROI指标都可以作为特征，但需要我们解释其意义和可能的机制。 在超参数的情况下，不需要做选择。 特征选择 这是由维度灾难与过拟合带来的必需的步骤。当自变量数接近样本量时，就可以几乎完全拟合因变量了。而脑影像数据的自变量往往远超样本量。这导致在训练样本上表现非常好，而在外部样本是得不到验证。因此，这是一个需要面对的问题。常见的方式就是删减不重要特征，获得稀疏特征矩阵。 BrainNetClass 提供了T检验和lasso（即L1正则化）两种手段。 模型评估 用一个外部样本来测试模型的可泛化性是一个理想的方法。当我们没有这个外部样本时，交叉验证就是一个替代方案。 BrainNetClass 提供了k-fold和留一法两种方案。Russell等人2019年发表JAMA Psychiatry的文章强烈推荐使用k-fold而不是留一法。 从模拟数据上讲，交叉验证是能够有效的对模型进行评估的。但最近期刊更偏向于有独立样本验证的研究，毕竟这更直接更有说服力。 最终的输出结果在输出文件夹中，结果很丰富，甚至连图都画好了，参见manual即可。 参考文献 Poldrack, R. A., Huckins, G., &amp; Varoquaux, G. (2020). Establishment of best practices for evidence for prediction: a review. JAMA psychiatry, 77(5), 534-540. Zhou, Z., Chen, X., Zhang, Y., Hu, D., Qiao, L., Yu, R., … &amp; Shen, D. (2020). A toolbox for brainnetwork construction and classification (BrainNetClass). Human Brain Mapping.","link":"/post/55795/"},{"title":"CPM-鲁棒的认知神经预测方法","text":"CPM (connectome-based predictive modeling) 是近些年流行的神经影像分析方法之一。研究者通常借助CPM方法，探究某些认知特征背后的神经连接组模式。关于CPM的具体细节在Xilin Shen于2017年在nature protocol上发表文章中有详细阐述。以下为该文章的部分总结，可以供初学者了解。 文章梳理 CPM的优势：prediction power和现有方法一样甚至更好，且对于不熟悉机器学习的研究者来说更为友好。 CPM数据适用：functional connectivity based on fMRI or DTI or EEG 公开数据库：可以用于验证模型的适用性 使用CPM的文章：两篇nature neuroscience 最简单最流行的心脑关联方法：相关和回归模型 容易产生过拟合，缺乏普适性 可类比CPM的方法 HCP Netmats ……的多元预测和一元回归 针对rest fmri 使用ICA和偏相关构建连接矩阵 使用更复杂的方法建立心脑关联 CPM的优势 简单 容易解释 支持向量回归SVR 基于支持向量机分类框架，赋予全脑特征不同的权重来预测行为 和CPM在性能上有差别 其它基于机器学习的方法 基于离散变量甚至二分变量，而不是基于连续变量 基于二分的需要有精确的分类，特别是针对边缘部分 对健康群体的辨别力差 预测与相关 预测常常作为相关的一种表述 严格来说，相关并不能称为预测 数据过拟合的问题 用相关为什么会过拟合？ 缺少交叉验证导致推广性差 在脑影像的众多特征中进行选择性的分析可能会导致完全错误的结论(kriegeskorte2009) CPM的功能 通过连接矩阵和行为指标建立模型 选择特征而非用全脑特征 对预测力显著性进行置换检验 结果可视化 交叉验证 CPM的使用要求 功能连接矩阵 连续数据，且代表连接强度 辨别力较大的行为指标 CPM的优势 线性运算 更快速，更简单，对特征权重更容易解释 在~45000个功能连接中提取最好的一些特征 提高预测力 交叉验证 控制基于全脑分析的假阳性结果 替换传统的多重比较校正 CPM的局限 使用简单的线性模型，对于复杂、非线性的功能链接与行为的关联的拟合不是最好的 模型预测出的结果的变异小于真实结果的变异 对行为指标两端的预测有偏差 预测准确率低于SVR或多变量的方法 近期研究表示，结合多种方法可能更好 CPM的注意事项 头动不应与行为指标相关 剔除头动过大被试 年龄、性别等等混淆因素应当使用偏相关排除 二分行为变量不适用于CPM 应该排除掉 CPM的过程 选择和行为相关显著的特征 合并特征值建模 交叉验证 置换检验(如果是独立样本验证，则不需要置换检验) CPM结果可视化 载入节点定义文件 节点nift文件或者节点MNI列表txt 载入特征选择的二元矩阵(比如264*264) 可以用dlmwrite写入 需要对称矩阵，三角矩阵不可用 –&gt;测试可用 根据需要绘制连接图 参考文献 Shen, X., Finn, E. S., Scheinost, D., Rosenberg, M. D., Chun, M. M., Papademetris, X., &amp; Constable, R. T. (2017). Using connectome-based predictive modeling to predict individual behavior from brain connectivity. nature protocols, 12(3), 506-518.","link":"/post/59498/"},{"title":"ESB-Easy batch for EEGLAB","text":"ESB能够快速批量的进行脑电数据处理，其工作原理和初衷类似于很流行的磁共振数据分析软件DAPBI，旨在提高数据分析的效率和一致性。ESB结合RECOR(雷旭)模块，能够快速的进行网络分析。与此同时加入了一些其他的模块以提高效率。ESB是我在学习脑电和matlab的时候编写的工具，目前已经经历了一些数据分析任务的考验。由于自己目前使用的主要研究方法转为磁共振，ESB已经多年未更新。希望今后有更好的想法，或者重新接触脑电的时候，再来完善它。 ESB_X_1.3.0.20170909_P.rarESBManual 下载","link":"/post/18567/"},{"title":"模拟：fMRI中的GLM模型到底要不要加入所有刺激的onset和duration","text":"直接用code说话，如下： 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556%% GLM分析%SPM glm的分析原理%输入: onset duration condition(/stimulus)%输出: 估计的beta(分条件)%%过程: % &gt; 通过onset和duration估计出每个condition可能的bold响应——也就是X,% &gt; 通过onset和duration提取出观测到的bold响应——也就是Y (非必须)% &gt; 通过GLM得出估计出的beta——也就是每个condition对Y的影响的强度% % SPM的GLM的特别之处:% 不知道真实的X, X是由设计矩阵卷积HRF得到的.%% 探索的结论:% &gt; 尽可能在设计矩阵中加入所有conditionclear%% data 总共5个条件% 无法观测到的数据B = [1;0;0.5;-2;0] % 真正的beta(理论上存在,实际上无法观测)X = randn(100,5); % X的每一列相当于一个condition/stimulus所引起的bold响应 % (此数据理论上存在,实际上无法观测) % SPM建模中的X是由设计矩阵卷积得到的,与真实的X可能存在差距% 可观测数据BOLD = X*B + randn(100,1)*.5 % 所有stimulus的bold响应合并起来, 得到观测到的bold响应% conditions = [1 3 5]X1= X(:,conditions) % 只在模型中加入一个condition的情况 %% 建模过程% 最完善模型[b,~,~] = glmfit(X,BOLD,'normal') % % mean(stats.resid)% 实践中可能出现的模型[b,~,~] = glmfit(X1,BOLD,'normal')% mean(stats.resid)B(conditions)%% 迭代平均% 用迭代算beta平均值来比较一下for ii = 1:100[b,~,~] = glmfit(X,BOLD,'normal') ;% B0(:,ii) = b(conditions+1);[b,~,~] = glmfit(X1,BOLD,'normal');B1(:,ii) = b(2:end);endB0m = mean(B0,2)B1m = mean(B1,2)","link":"/post/58374/"},{"title":"ROI 和 mask: 脑地图的操作——救急，我的mask没有labels！","text":"有时候，我们得到的mask并没有标明其ROI节点属于什么区域，例如power264模板。当然我们可以逐个按照坐标查询，也可以用各种viewer逐个的可视化查询。但这种操作也都存在一个问题，即不好处理当ROI跨越多个区域的情况。 因此，我们可以将mask映射到已有label的模板上，例如AAL、brodman等等。 这样就可以精确的输出这些ROI所涉及的所有区域名称。 献上写好的代码 copy之后保存即可。 123456789101112131415161718192021222324252627282930313233343536373839function [reflect , Map ]=TBX_LabelAtlasByAnother(AtlasToBeLabel , AtlasWithLabel_atlas, AtlasWithLabel_label) % inpute atlas should be same size%AtlasToBeLabel = 'Reslice_shen_2mm_268_parcellation.nii'%AtlasWithLabel_atlas ='Reslice_AAL3v1_170.nii';%AtlasWithLabel_label ='AAL3v1.nii.txt' ;v = spm_vol(AtlasWithLabel_atlas) ;labelAtlas = spm_read_vols(v);v = spm_vol(AtlasToBeLabel) ;atlastobelabel = spm_read_vols(v);NewAtlas = atlastobelabel;NewAtlas(logical(atlastobelabel)) = labelAtlas(logical(atlastobelabel));reflect = [ reshape(atlastobelabel,[],1) reshape(NewAtlas ,[],1)] ;reflect( sum(reflect,2)==0,:)=[];% save aal3powerReflect.mat reflectlabels = readtable(AtlasWithLabel_label);labels = table2cell(labels);Map = {};for i = 1:max(atlastobelabel,[],'all') idx = atlastobelabel==i; lbidx = unique(NewAtlas(idx)); Map{i,1} = lbidx(lbidx~=0); Map{i,2} = labels(Map{i,1},2);end%open Map","link":"/post/36190/"},{"title":"ROI 和 mask: 脑地图的操作——二维投射到三维","text":"mask通常是一个二维或者三维的矩阵，它的存在是为了提取某些区域的信息，或者说将关注点聚焦到某些区域。三维的mask可以直接还原到原来的空间。二维的mask通常是做功能连接组分析时输出的结果，它表示选择了某些ROI，或者某些ROI通过了检验等等。为了可视化或者其它原因，可能需要将二维的mask投射回三维空间，输出三维mask。 例如通过检验的连接组mask 将其投射回3d空间 做连接组分析的工具通常都能将mask投射回原空间，但通常不会输出三维的mask文件。 同样的，理解MRI数据结构之后，也可以手动将其投射回三维空间。 献上写好的代码 copy之后保存即可。 123456789101112131415161718192021222324function TBX_FC2mask3d(outputName , ROImapFile , FC )%% reflect selected Functional connectivty matrix to original mask % TBX_FC2mask3d(outputName , ROImapFile, FC_matrix )if ~strcmpi( outputName(end-2:end),'nii') outputName = [outputName '.nii'];endv = spm_vol(ROImapFile);d = spm_read_vols(v);v.fname = outputName ;newmask = d*0;node = find(sum(FC,2)&gt;0);for i = 1: length(node) pnode = node(i); newmask(d==pnode)=pnode; endspm_write_vol(v,newmask);","link":"/post/57393/"},{"title":"Matlab工具包安装：为啥我的会有报错&#x2F;警告?","text":"首先来看错误示范：解压压缩包—&gt;主页—&gt;设置路径—&gt;添加并包含子文件夹—&gt;保存，一气呵成！ 对于小型工具包来说，这样做可能并不会出问题。 那为什么不推荐这样做呢? MATLAB有一类特殊函数：私有函数 来看看官方对于私有函数的说法 mathworks.cn 私有函数在您希望限制函数的作用域时很有用。可以通过将函数存储在名称为 private 的子文件夹中，来将该函数指定为私有函数。这样，仅 private 子文件夹紧邻的上一级文件夹中的函数和脚本可使用该函数。 为什么会有这样的设计呢？ 有时候会发现明明我的操作没有问题，工具包就一直报错。 一种可能的原因就是工具包冲突了 用于认知神经分析的工具包有很多很多，开发者也性情不一，对函数的命名也各式各样。这就可能会出现，两个功能完全不同的函数命名却是相同的。MATLAB在调用的时候，只会调用路径最顶端的那个，这就可能会导致错误。 但如果尽量使用私有函数，就会更大程度避免这个问题。 而大型工具包例如SPM和EEGLAB都有私有函数。 如果你添加了全部文件夹，它甚至会用黄字警告…… 应该怎么安装呢？ 如果manual中有安装方法，按照manual安装。 如果工具包中有setup.m或者install.m等等用于安装的文件，使用他们进行安装，然后savepath 如果都没有，可以先尝试只添加根目录，如果有问题，再添加子目录。","link":"/post/20793/"},{"title":"ROI 和 mask: 脑地图的操作——提取","text":"ROI map就是在一个标准脑空间里的坐标，是我们做脑网络分析的常用手段。其数据是一个3D的矩阵，矩阵中大于0的值为ROI，当有多个ROI的时候，用不同的值来表示。 有时候我们不需要全部的ROI，比如，我们只想要默认网络的map，就可以在YEO或者其它的模板上抠出来。 其原理很简单，首先用spm_vol和spm_read_vols函数读取nii文件，获得map数据。之后就是一些简单的矩阵运算了。 献上写好的函数 输入roi map可以是矩阵或者nii文件，ROIindex可以多个roi的值，输出为提取后的ROI map和合并的ROI map copy之后保存即可。 12345678910111213141516171819202122232425262728293031323334353637383940414243444546function varargout= TBX_extractROIfromTemple(varargin )% TBX_extractROIfromTemple(templatepathORmat , ROIindex , outputfullpath) % example :% TBX_extractROIfromTemple('./aal.nii' , [3 4] , 'aal_Frontal_Sup.nii') if nargin &gt;0 template = varargin{1} ;endif nargin &gt;1 ROIindex = varargin{2} ;endif nargin &gt;2 outputpath = varargin{3} ;endif ischar(template) v = spm_vol( template); template = spm_read_vols(v) ;endmask = template*0 ;for i = 1:length(ROIindex) roi = ROIindex(i) ; mask( template==roi)=1; endtemplate(~mask) = 0;mask = template;if nargin&gt;2 v.fname = outputpath; spm_write_vol( v,mask) ; v.fname = strrep( outputpath , '.nii' , '_mask.nii' ); spm_write_vol( v, logical( mask)) ; else varargout{1}= mask;end","link":"/post/24812/"},{"title":"关于E-prime的一些事","text":"Eprime 如何安装？Eprime1.0网上有已破解版本，直接安装即可，但不推荐安装1.0，对于中文和文件格式的支持不好，影响效率。 Eprime2.0直接安装官方包即可，输入试用序列号可以激活试用版，试用版有使用次数限制和license提醒，如何去除限制参见： 如何完美破解Eprime2.0？ Eprime3.0未使用过，不了解。 Eprime的版本问题从站长在网上检索到的版本来看，Eprime2.0.8 是一个很好的选择。当你的编写的Eprime程序不止在你的电脑上运行的时候，尤其要注意小版本号。比如，2.0.10编写的无法在2.0.8的eprime上打开。professional版本不能在普通版上打开。 Eprime的时间精度?Eprime的时间精度对于一般的实验肯定是没有问题的，哪怕阈下刺激的实验都可以，只要配置高刷显示器，并且在eprime中设置好即可。 Eprime的文件格式支持Eprime2.0支持较多媒体格式，图片不限制为bmp，中文字符也支持。所以，不用进行痛苦的文字、文件格式转换了。。。 Eprime2.0常见问题解决问题：打开设备错误？ 解决：通常硬件问题导致，点击Edit&gt; Experiment &gt; Devices 检查有没有勾选不支持的硬件。 问题：Unable to set display mode:…？ 解决：通常是eprime设置的分辨率和刷新率跟显示器不匹配。 点击Edit&gt; Experiment &gt; Devices &gt; Display , 在Match desktop resolution at runtime选项上选择yes. 桌面&gt;显示设置&gt;缩放与布局&gt; 调整成100%","link":"/post/40235/"},{"title":"关于全脑信号回归的争议","text":"关键词：GSR；rsfmri；fMRI；预处理；preprocess The global signal (GS) is a time course obtained by averaging resting-state time series over the entire brain (Desjardins et al., 2001; Macey et al., 2004). 对GSR争论的看法： 1. https://doi.org/10.1016/j.neuroimage.2016.11.052 不存在“正确”的方法。“正确”方法是证明对预测感兴趣的特征最有用的方法 不同的处理方法揭示了关于大脑功能的不同见解 近期解决方案 1. DiCER https://doi.org/10.1016/j.neuroimage.2020.116614 提出的新算法，基于fmriprep 反对GSR https://doi.org/10.1089/brain.2012.0080 支持GSR GSR能提高特异性 https://doi.org/10.1016/j.neuroimage.2009.05.005 GSR的好处 GSR增强心脑关联： https://doi.org/10.1016/j.neuroimage.2019.04.016 GSR的坏处 文献检索结果: wGSR: 使用GSR nGSR: 不使用GSR 检索结果存在偏差：不使用GSR且未提及GSR的文章较难检索 案例 1. https://doi.org/10.1016/j.neuroimage.2018.06.001 wGSR和nGSR结果都显著，GSR对预测结果影响不大，作者认为这说明了算法的稳定性 2.https://doi.org/10.1016/j.neuroimage.2017.11.010 只使用了GSR, 因为他认为根据前人文献,GSR能够增强预测准确性. 3.https://doi.org/10.1002/hbm.24947 采用了GSR, 因为GSR能够优化预测。但本文关注于bootstrap，不对其他preprocess做讨论。 4.https://doi.org/10.1016/j.jad.2020.04.028 nGSR的结果不显著。作者认为nGSR影响了某些连接，wGSR降低了artifacts，是有益的。 5.https://doi.org/10.1038/nn.4179 Nature neuroscience, 使用了GSR, 未使用nGSR做对照, 未说明原因 同样的有NI,https://doi.org/10.1016/j.neuroimage.2019.02.002 6.https://doi.org/10.1038/s41467-021-22027-0 Nature Communication, 未使用GSR, 未说明原因","link":"/post/32323/"},{"title":"如何把网站打造成喜欢的模样?","text":"主题修改链接样式wordpress后台-设置-固定链接，可以修改链接样式，但是可能遇到问题，比如修改后无法访问 通常发生在本地配置的情境下，由网页服务器的配置导致的 使用Apache服务器，则修改httpd.conf ，将网页根目录标记处的 1AllowOverride None 修改为 1AllowOverride All 有时候会找不到httpd.conf，可能是安装了apache2，或者nignx等等…. apache2的配置文件为：/etc/apache2/apache2.conf 修改方法相同 如果使用的是宝塔面板LNMP环境，需要在后台手动设置伪静态wordpress规则，无需重启服务 12345location /{try_files $uri $uri/ /index.php?$args;}rewrite /wp-admin$ $scheme://$host$uri/ permanent; 修改网页样式(css)1. 修改css样式表 2.更好用的方法 使用chrome或firefox的元素查看器，定位css样式 在页面内容中插入html代码，定义css样式进行覆盖或者调整 1234567&lt;style type=&quot;text/css&quot;&gt;p {text-indent:0em !important;} .entry-header{display:none;}.author, .cat-links{display:none;}.entry-title ,.entry-meta{text-align:center;}ul {padding-left:1px !important; margin:0 0 1.5em 0em !important}&lt;/style&gt; 短代码(shortcode)非常有趣的是，段代码可以以纯文本的形式调用，这意味着任何可以插入纯文本的地方都可以调用短代码，实现丰富的功能和样式。 如果不分主题不完全支持段代码（sidebar），可在function.php函数中尝试添加 1234/**短代码功能*/add_filter('widget_text', 'do_shortcode'); 转载复制版权提示在页面的任何模块(header,footer….) 中加入js代码, 简单好用 123&lt;script type=&quot;text/javascript&quot;&gt; document.body.oncopy=function(){alert(&quot;复制成功！撰文不易，转载请保留原文链接且注明文章出处，谢谢合作！&quot;);}&lt;/script&gt; 其实只要插入到想要代码生效，并且可以运行代码的地方就可以了，比如任意html模块 评论开关有时候我们需要关闭全站评论，比如为了通过备案 可以直接操作数据库 1UPDATE wp_posts SET comment_status='closed' 这里的wp_posts是wordpress表名，可能需要根据你的网站修改前缀名 恢复方式 1UPDATE wp_posts SET comment_status='open'","link":"/post/27678/"},{"title":"心理学大数据测试与管理系统","text":"很荣幸在我初进组的时候，得到老师的信任，让我来负责这样一个大型项目的行为数据收集工作。尽管遇到很多困难，但在大家的共同努力下，最终不负使命。离最初开始这个项目已经过去了两年，在这里，简单的记录一下部分工作内容。 1.这是一个什么样的项目？项目计划收集1500人的脑影像、行为以及其它方面的数据。行为测试包含了繁多的测试内容，实际测试超过8000人次，实际收集实验数据和问卷数据超过45万份。 由于涉及的5方合作的因素，具体安排十分复杂，接下只讲数据收集管理部分。 2.我需要解决哪些主要需求？ 快捷地启动不同的测试程序（问卷/Eprime/Matlab） 方便被试自主操作 测试的一致性和平衡性 数据的完整性 数据的收集，传输 数据的保存，整理 为了得到准确的实验数据，所有的这些需求，我都排除了人工主导的方案，当需要同时收集50人以上的十几份程序、问卷数据的时候，人工过程难以保证不产生错误。 首先，为了保证测验过程的有序性，需要快捷地启动不同的测试程序（问卷/Eprime/Matlab） 快捷的启动可以通过超链接完成，但要同时满足其它要求，就需要一定程度的程序控制。因此，可以编写一个测试面板来控制测试流程，如本文的封面图。 由于需要以图形界面的形式启动MATLAB来运行psychtoolbox实验程序，同时测试设备的容量有限，最终对MATLAB2010进行了配置来运行试验程序。通过提前配置startup.m 文件可以控制MATLAB的启动动作，从而直接通过面板运行指定MATLAB实验程序。 eprime可以直接通过dos命令运行 由于每次的测验内容都有变化，最好提供测验内容的选择 为了尽量减少被试的任务无关行为，以及主试对被试的非必要干预，实验应当按照指定流程自动进行。 前一个实验任务启动后，测试面板等待实验结束，并自动进行下一个动作。 为了避免被试频繁输入被试编号产生错误，应当在保证信息正确的情况下，避免人工输入编号。由于eprime不可以带参数运行，可以通过sendkey的方式，自动将编号输入到eprime对话框。问卷星企业版可以自定义链接参数，因此可以通过自定义来源的方式，将被试信息传入问卷星后台。matlab则很容易通过函数实现信息的传递。 eprime有时会丢失测试数据文件，实验完成，测试面板会自动检查数据的完整性。 主试检查被试的完成情况后，会一键将数据上传至文件服务器。 数据管理系统会对接受到的数据进行整理、记录，并生成测验档案，通过邮件自动发送至相关负责人邮箱。 同时，测验档案也上传至实验室网站，提供查询接口供主试查询完成情况。 如此，完成了整个测验流程。 实际的过程，遇到了很多麻烦。就像这个项目同时与专业的阿里团队合作定制预约系统时一样，设想总难满足实际场景的各种特殊情况，最后都在实践中不断发展、完善。","link":"/post/49314/"},{"title":"快速生成大量测验报告","text":"有时候我们会为了吸引被试参与实验，承诺给被试测验报告。当样本量很大的时候，这可能会涉及很大的工作量。 在这里，我提供了一种简易的方法。可以批量输出图文并茂的测验报告，同时可以在线查询。 既然要简单，我们就不整数据库那一套了。这个方法主要是利用HTML格式丰富且易编辑的特点 主要过程分为4个简要的步骤 用word制作报告模板 将word模板转成html格式 批量查找替换，形成个人报告 上传，设置外部查询 制作报告模板用word设计报告模板。这一步按照自己的喜好设计即可，需要注意的是，我们要在需要替换数据的地方添加占位标志，这个标志要有唯一性，以便后续的查找替换。 例如：“姓名：张三” 写成 “ 姓名 ：靐张三” 在这里，使用了一个生僻字“ 靐 “，为的是不和正文重复。 需要注意，不应该在汉字中用字母或者符号做标志，比如 “ 姓名 ：#@张三” ，这会导致转换成html之后，无法通过标志查找替换，因为word输出html后，他们的字体不同。 将word模板转成html格式word界面里，将文件直接另存为htm/html格式即可 批量查找替换，形成个人报告这一步需要编程，这里提供了用于240题目大五人格报告的matlab代码，可以套用 123456789101112131415161718192021222324252627282930313233343536373839clear fid = fopen('NeuroSpider.html','r+','n','utf-8');rawContent = textscan (fid, '%s', 'delimiter', '\\n');rawContent = rawContent{:};fclose(fid);[~,~,NEO]=xlsread('NEO_all.xlsx','score');NEO(2:6,:) = []; %无效数据NEO(:,1 ) = cellfun(@(x) sprintf('%05d',x), NEO(:,1),'un',0 );NEO = cellfun(@num2str,NEO,'un',0);SubInfos = {};for i = 2 :size(NEO,1) i subInfo = NEO(i,:); subContent = updateSubInfo(rawContent,subInfo); % 执行替换 writecell(subContent,['reports\\' subInfo{1} subInfo{2} '.html'],'encoding','UTF-8','FileType','text','QuoteStrings',false) %写入HTML格式的报告文件 SubInfos(end+1,:) = [subInfo(1:2) {['http://neurospider.cn/neor/' subInfo{1} subInfo{2} '.html']}];endxlswrite('测验报告.xlsx',SubInfos);function subContent = updateSubInfo(rawContent,subInfo)subContent = rawContent;subContent = strrep(subContent,'喔大雾编号', subInfo{1});subContent = strrep(subContent,'喔大雾姓名', subInfo{2});subContent = strrep(subContent,'喔大雾神经质', subInfo{33});subContent = strrep(subContent,'喔大雾外向型', subInfo{34});subContent = strrep(subContent,'喔大雾开放性', subInfo{35});subContent = strrep(subContent,'喔大雾宜人性', subInfo{36});subContent = strrep(subContent,'喔大雾责任心', subInfo{37});idx = find(contains(rawContent,'MQKWuM'));for i = 1:30 subContent{idx(i)} = regexprep(subContent{idx(i)},'MQKWuM..', subInfo{i+2});endend 这里的” 喔大雾神经质 “和” MQKWuM “都是为了查找替换的标志。 同时，会输出 ”测验报告.xlsx “，这个excel里包含了被试编号，姓名，报告链接等等信息。上传到问卷星就可以设置外部查询了。 上传，设置外部查询将 测验报告.xlsx 上传至问卷星，让被试通过个人信息查询，以免泄露隐私。同时需要上传生成的html文件到服务器上。 这样就可以进行在线查询了。","link":"/post/7159/"},{"title":"怎么在线运行psychopy(个人服务器&#x2F;pavlovia)","text":"首先提供两个案例： 简单反应时程序 ScreenScale(ps: 服务器到期，已失效) Psychopy提供了一个非常棒的功能，就是online模式。有了这个功能，我们就可以在线收集行为数据了。 原理就是把python脚本转换成JavaScript在网页中运行。 在psychopy的builder视图中，可以直接通过File&gt;Export HTML将psychopy程序转换成html文件和js代码 builder视图可以直接将程序同步到pavlovia.org上，购买license后就可以在线收集数据了。过程很简单，这里就不讲了。 但pavlovia在国内使用不太方便(访问与购买)，如果自己有服务器，也可以放在自己的服务器里 尝试过的同学可能会发现，导出的网页并不能正常运行实验程序。 百度一下发现需要删除js中的“import”语句。 其实并不是。 先说解决方法，有三个步骤 上传任意程序到psychopy.org中，然后下载该源码（view code，然后下载），拷贝其中的js文件夹到自己的程序文件夹中。 在psychopy.org中运行任意程序，打开浏览器开发工具&gt;Network ，查看psychojs*.css和psychojs*.js的地址，下载它们放到lib文件夹中 将导出的程序（html和js文件）原封不动的上传到服务器（解决跨域访问错误） 拷贝js文件js包括两部分，lib和js文件夹 最终的文件夹包括 js lib 举个例子： 上传到服务器本地无法运行是由于库文件的加载失败导致的，尤其是本地测试的时候。可以通过浏览器的开发工具排除出这个问题。 本地测试时，会由于CORS error导致程序js不能加载。上传到服务器可以避免这个问题。如果没有服务器。。。那用online模式也没有意义了。 完成之后，psychopy的程序就可以在线上运行了。 比如一个简单反应时程序 (ps: 服务器到期，已失效) 以及下载自pavlovia.org的调整刺激物理尺寸(cm)的demo(ps: 服务器到期，已失效) 此时的在线程序可以运行，但数据会存储到本地，而不是服务器，如果要存储到服务器，还需要更多工作。 比如将结果上传到服务器 常见问题解决 psychopy转js，上传服务器之后，提示图片等资源找不到，由于转换过程没有生成资源载入的js代码 12345678// 在实验前载入资源，例如：resource/bank.jpgpsychoJS.start({ expName: expName, expInfo: expInfo, resources: [{'name': 'resources/bank.jpg', 'path': 'resources/bank.jpg'} ] }); pavlovia.org上的代码中调用的js文件与psychopy不同 解决方法：在本地使用builder界面将*.pyexp文件转成js文件","link":"/post/24628/"},{"title":"怎么用psychotoolbox写一个贪吃蛇？","text":"贪吃蛇是一个非常经典简单的游戏 小蛇 &gt; 吃东西 &gt; 变大蛇 那怎么变成计算机语言呢？ 首先我们来理理这个逻辑 只要咱们的小蛇不撞死或者撑死，游戏就一直进行 这是一条非常好动的蛇，不死不歇 这条蛇非常听玩家的话，指哪儿去哪儿 真天上掉馅饼，随机落下食物 吃掉食物，丑小蛇变大蟒蛇 再转化一下，主要三个模块 移动 &gt; 曲线坐标的变化 食物 &gt; 随机点坐标 吃 &gt; 点坐标与曲线头部坐标重叠，曲线尾部坐标改变 然后我们来理一理这个过程 123456循环 随机食物 蛇身向前移动 if 方向指令 则 改变方向 if 蛇头坐标=食物左边 则 蛇尾坐标改变 更新界面 基本的框架有了，最好再加上碰撞判定，让小蛇随时能够结束劳碌的一生。 然后转换成psychtoolbox的代码（可直接复制粘贴到matlab编辑器中，当然得先安装psychtoolbox3） 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206%matlab psychtoolbox3function TBX_snake AssertOpenGL; % Get the list of screens and choose the one with the highest screen number. % Screen 0 is, by definition, the display with the menu bar. Often when % two monitors are connected the one without the menu bar is used as % the stimulus display. Chosing the display with the highest dislay number is % a best guess about where you want the stimulus displayed. screens=Screen('Screens'); screenNumber=max(screens); % Find the color values which correspond to white and black: Usually % black is always 0 and white 255, but this rule is not true if one of % the high precision framebuffer modes is enabled via the % PsychImaging() commmand, so we query the true values via the % functions WhiteIndex and BlackIndex: white=WhiteIndex(screenNumber); black=BlackIndex(screenNumber); % Round gray to integral number, to avoid roundoff artifacts with some % graphics cards: gray=round((white+black)/2); ScreenRct = [100 100 700 700]; M = zeros( ScreenRct(3) - ScreenRct(1) ,ScreenRct(4) - ScreenRct(2) ); S = size(M,1) ; % This makes sure that on floating point framebuffers we still get a % well defined gray. It isn't strictly neccessary in this demo: if gray == white gray=white / 2; end KbName('UnifyKeyNames'); escapeKey = KbName('ESCAPE'); % Contrast 'inc'rement range for given white and gray values: inc=white-gray; % Open a double buffered fullscreen window and select a gray background % color: % Use realtime priority for better timing precision: w=Screen('OpenWindow',screenNumber, gray , ScreenRct); priorityLevel=MaxPriority(w); Priority(priorityLevel); Stage = zeros(50); Snak.loc = size(Stage)/2 ; Snak.direct= 'l'; Snak.predirect = Snak.direct; Snak.lenth = 5; Snak.body = [[Snak.loc(1):Snak.loc(1)+Snak.lenth]' repmat( Snak.loc(2), Snak.lenth+1 ,1) ]; Snak.food = [];%randperm(length(Stage),1); Snak.crash = false; while true% for i=1:movieDurationFrames% M(randperm(N,100))=255; [Stage, Snak] = snak_food(Stage, Snak); [Stage, Snak ]=updateSnake(Stage, Snak ); if Snak.crash break end M = magnify( Stage ,S); % T = Screen('MakeTexture', w, M ); % Screen('DrawTexture', w, T); Screen('Putimage',w,M) [secs, keyCode, deltaSecs] = KbWait([], [],GetSecs+0.08);% [ keyIsDown, ~, keyCode ] = KbCheck; keyCode = find(keyCode, 1); % 37:40 if ~isempty(keyCode) if keyCode == escapeKey disp escape! break; else switch keyCode case 37 Snak.direct= 'l'; case 38 Snak.direct= 'u'; case 39 Snak.direct= 'r'; case 40 Snak.direct= 'd'; end end end Screen('Flip', w ,[],1); end if ~Snak.crash sca;else msgbox 'crashed!'end Priority(0); endfunction [Stage, Snak] = snak_food(Stage, Snak)if ~isempty(Snak.food) returnend freeStage = Stage==0; idx = randperm(sum(freeStage,'all'),1) ; [x,y] = find(freeStage) ; Stage(x(idx) , y(idx)) = 0.5; Snak.food = [x(idx) , y(idx)]; % Snak.food = [x(idx),y(idx)]; endfunction [Stage, Snak ]=updateSnake(Stage, Snak )% Snak.loc = [0 0 ] ;% Snak.direct= 'l';loc = Snak.loc;fprintf('pre=%s ; now=%s \\n',Snak.predirect,Snak.direct);linearIndold = sub2ind([size(Stage)], Snak.body(:,1) ,Snak.body(:,2) );d={'u' 'd';'l' 'r'};nd = intersect( [{Snak.direct} {Snak.predirect}] , d(1,:)) ;if length(nd)&gt;1 Snak.direct = Snak.predirect ;endnd = intersect( [{Snak.direct} {Snak.predirect}] , d(2,:)) ;if length(nd)&gt;1 Snak.direct = Snak.predirect ;end Snak.predirect = Snak.direct ;switch Snak.direct case 'u' loc(1) = loc(1)-1; case 'd' loc(1) = loc(1)+1; case 'l' loc(2) = loc(2)-1; case 'r' loc(2) = loc(2)+1; endSnak.body = [loc ; Snak.body ] ; Snak.loc = loc ;if ~isequal(Snak.loc, Snak.food) Snak.body(end,:) = [] ; try if Stage(loc(1),loc(2))==1 Snak.crash = true; end catch Snak.crash = true; end else Snak.food=[]; end if Snak.crash returnendlinearInd = sub2ind([size(Stage)], Snak.body(:,1) ,Snak.body(:,2) ); Stage(linearIndold) = 0; Stage(linearInd) = 1; endfunction M = magnify( Stage, S )N = floor( S/size(Stage,1));M = resizem(Stage,N);M = M*255;% colorM = repmat(M,1,1,3);M(:,:,3) = ones(size(M,1));end 下一次，我们带来eprime版本的贪吃蛇","link":"/post/54493/"},{"title":"怎么画边绑定图&#x2F;circos图?","text":"▴ Complex rearrangements of MLL in acute leukemias. These images are part of a poster that accompanies the publication of the MLL recombinome (C. Meyer et al., Leukemia 23, 1490 (Aug, 2009). 边绑定图/circos图是用来描述节点和边的关系的一种图，可以通过增加外圈的方式呈现丰富的信息。 在做脑网络分析的时候，经常会用这种图来表现脑区和脑区之间的关联。 用什么工具? http://www.circos.ca 专注于circos，很多研究者用它出图，发表了很多高质量的图，可定制度高。 2. NeuroMArVL – Brain Data Viewer (monash.edu) 这是一个很简单的在线工具，但是可以画出很好看的circos图，甚至有伪3D效果，比如这样的： 使用 NeuroMArVL 有一个非常需要注意的地方，否则画出来的图可能是错误的，并且你还未发现。 NeuroMArVL 有四个输入，分别是连接矩阵、坐标、属性和标签。其中的属性和标签文本需要使用CR换行符，windows直接输出的是不可以使用的！坐标文本使用的是CRLF换行符，可以在windows下直接生成。 CR换行符的文本可以用VSCODE之类的文本编辑器（记事本不行）来进行转化，或者使用Linux/mac来生成。 属性只可以使用数字。 可能作者的开发环境是mac或者Linux，开发过程忽略了这个问题，希望将来能够修复。","link":"/post/17118/"},{"title":"怎么给网站搬家？","text":"网站搬家主要涉及三部分 网页程序、文件，可以直接通过ftp搬运 数据库。通常直接导出sql文件即可，部分服务商的数据库没法直接访问，可以通过网站程序/插件导出 链接替换，把网页程序、文件和数据库中的旧链接替换成新链接 wordpress搬运只需要拷贝wp-content文件夹和数据库 sql数据库通常为utf-8纯文本编码，意味着可以用文本编辑器查找替换。。。 或者用一些些一键搬家的插件，但很多都是付费的","link":"/post/30808/"},{"title":"怎么薅羊毛（免费建站）？","text":"还别说，免费建站真有。站长试过很多，但总的来说，只适合用来做做测试，玩一玩~ 最出名的应该算是github的page服务了 github可以免费托管你的静态网页——注意是静态网页，这意味网站内容的更新需要通过修改网页文件来完成，网站没有数据库，不能运行php，很纯粹的内容展示。 各大云服务商也会有一些免费的资源，比如腾讯云、阿里云。限制很多，但是可以用来练手。 还有一些随时跑路的小站，免费让你用，但是不但有很多限制，还要你帮它打广告。。。不过这也是可以理解的，比如sanfenyun。不推荐，注意防骗！","link":"/post/30452/"},{"title":"打开黑匣——MRI数据是什么样的？","text":"MRI数据是磁共振设备为大脑拍摄的“照片”，直观的理解它就是很多幅图片。 比如一张结构像： 它是一张灰度图片，反映在数据上是这样的 很多不同角度的图片叠在一起，就形成了一个3d“无死角”的大脑结构。 用MATLAB来认识MRI数据非常合适，MATLAB内置dicom库，可以直接调用。它可以读取dcm、IMA等格式的图像。 123filename = 'a.dcm';img = dicomread(filename);header = dicominfo(filename); dicomread 读取数据，然后用imagesc(img)即可可视化。 对于静息态来说，一张dcm读取进来的数据是二维的，但包含的却是三维的信息。而对于结构像T1或者DTI，则是二维的一个截面图像。 dicominfo包含该影像的所有信息，比如做任务态或者静息态的sliceorder信息 例如hearder.Private_0019_1029中就包含了每个slice的扫描时刻，这个信息可以用来判断sliceorder或者做多通道的slicetiming。 而转换过后的nii格式的数据，则是3维或者4维的。 nii格式的可以通过spm的命令读取 1234567891011% read Nii data to matlab workspacev=spm_vol(‘stest.nii');d=spm_read_vols(v,0);% slice datad1=d(:,:,150);d11=squeeze(d1);% imgage showimagesc(d11)colormap gray 既然是3D的数据，我们可以从各个角度观察它 1234567891011121314[x,y,z]=meshgrid(1:512,1:448,1:192);sx=200;sy=200;sz=96;slice(x,y,z,d,sx,sy,sz);xlabel('x');ylabel('y');zlabel('z')shading interp ;colormap gray axis off;box offwhile 1 camorbit(2,0,'camera') M=getframe(gcf); nn=frame2im(M); [nn,cm]=rgb2ind(nn,256);end","link":"/post/6134/"},{"title":"打开黑匣——机器学习特征篇之从矩阵到向量到矩阵","text":"对于连接组机器学习来说，其特征（也可理解为自变量）就是功能连接矩阵，例如最常见的相关矩阵。 通常，特征以向量形式存在于分析过程中，即一行或者一列数据即为一个特征向量。而相关矩阵显然不满足这个要求，因此我们需要对它进行转换。有时候我们需要计算overlapping的边用于展示或者验证，又需要将特征向量投射回原来的矩阵。 首先，功能链接矩阵是对称矩阵。这意味着它有一半的数据都是重复的。 这种重复对于模型毫无意义，如果不处理它，可能会对复杂模型产生损害，这一点可以通过模拟数据验证。但是对于一些简单模型，例如CPM的一元线性模型，这种重复没有影响。 因此，如果要使用复杂模型我们只取一半的数据，且不要对角线。 1feature_mat = tril(FC_mat,-1); % FC_mat为功能链接矩阵 或者 1feature_vct = FC_mat(tril(ones(size(FC_mat)),-1)&gt;0) 考虑到我们可能会有还原有效特征的需求，最好将特征的索引保存下来，一并输入到计算过程中 12feature_idx = find(tril(ones(size(FC_mat)),-1))feature_vct = FC_mat(feature_idx) 机器学习的过程中，通常还需要进行特征的稀疏化 例如，通过相关来筛选特征 12[r,p ] = corr(feature_vcts_train,behav_train)feature_vcts_train_sparse = feature_vcts_train(:,p&lt;0.05); 此时，想要将稀疏的特征还原回原矩阵，将筛选同时应用与特征的索引即可 1feature_idx_train_sparse = feature_idx_train(p&lt;0.05); 然后还原到原来的矩阵 12FC_mat_sparse = FC_mat*0;FC_mat_sparse = feature_vcts_train(1,feature_idx_train_sparse );","link":"/post/20432/"},{"title":"脑网络机器学习工具包NS_CPM","text":"NS_CPM是本站开发的用于连接组信号进行机器学习分析的GUI工具包。NS_CPM使用一元线性模型、lasso回归或者相关向量回归(rvr)预测连续的行为变量，且搭建好了广泛使用的k-fold交叉验证框架和置换检验。NS_CPM可以输出重叠（Overlapping）的特征，用于特征泛化。NS_CPM提供简明的可视化操作，以及高自由度的脚本操作。其所有功能均支持并行运算，可以快速地在高性能服务器上开展数据分析工作，且已在MATLAB2010a及以上版本(WIN/LINUX)测试通过。 特征输入 连接组数据作为在认知神经科学领域常见的用于机器学习的特征，是本工具最初设计服务的方向。连接组有着较为深厚的研究基础和研究潜力，在将来较长的一段时间内都有较高的研究价值。功能连接组以及结构连接组数据都可以作为特征输入。作者将来也可能会将其它模态的数据加入到NS_CPM中。 模型构建 CPM(Shen., et al., 2017)。作为一种基于一元线性模型的方法，有着更少的假阳性结果和更强的解释性，并受到广泛的应用。 LASSO回归。LASSO正则化和连接组有着一个关键的相似性，即稀疏性。常被用于机器学习的特征提取，也可以用于模型构建。 Elastic-net。脚本模式也支持弹性网络回归(elastic-net)，通过调整L1和L2正则化的比例来调整特征与模型。出于简明的考虑，此模型暂时未加入到GUI中。 rvr。相关向量回归算法。 模型评估 NS_CPM提供了交叉验证框架。由于留一法可能会导致模型的高估，并不被推荐用于认知神经的模型评估（Poldrack, et al., 2020）。NS_CPM目前只加入了k-fold交叉验证框架。 置换检验可以用来进一步评估模型，即通过随机置换标签后，重复模型构建，获得模型评价指标的分布。检验的p-value定义为：置换分数高于原始分类的分数的百分比。 结果输出 NS_CPM使用预测值与真值的相关系数作为模型的评估指标，通过置换检验计算p值以增强结果的可信度。同时NS_CPM可以输出overlapping特征用于特征泛化。 参考文献 Shen, X., Finn, E. S., Scheinost, D., Rosenberg, M. D., Chun, M. M., Papademetris, X., &amp; Constable, R. T. (2017). Using connectome-based predictive modeling to predict individual behavior from brain connectivity. nature protocols, 12(3), 506-518. Poldrack, R. A., Huckins, G., &amp; Varoquaux, G. (2020). Establishment of best practices for evidence for prediction: a review. JAMA psychiatry, 77(5), 534-540.","link":"/post/62271/"},{"title":"转录组-影像空间关联分析","text":"背景知识 基因探针（probe）：是一段带有检测标记，且顺序已知的，与目的基因互补的核酸序列(DNA或RNA，单链)。 转录组测序：对细胞内所有转录产物（各种RNA）的集合进行测序（主要技术：RNA-Seq）。不同组织样本的转录产物不同，工程量浩大。 Allen Brain：一个公开数据库，其中包含了人类基因组在人脑中的表达信息。 目的 用 transcriptome-neuroimaging spatial correlations (TNSC) analyses,的方法，识别与皮层某些区域的FC关联的基因。 方法 定义ROI(regions) 计算FC genes * subjects * regions matrix （与常见的有一点区别） 计算的是sub-regions和tissues的相关 这么做的原因: 基因数据只有一组，而非每个人都有 1280个区域的5013个标准化基因表达数据 用TNSC找到有关的基因 数据长什么样？ 易混点：此处的功能连接与传统分析不同，非ROI-ROI的连接。 基因转录组矩阵是什么样的？ tissues * genes 的矩阵，值表示某个基因在某份组织中的表达水平 FC矩阵 （ tissues * subjects ) * ROIs 的矩阵 相关矩阵（结果）长什么样？ genes * subjects * regions 单独看每个sub-region，有tissues* subjects的矩阵 每个被试都有1280个FC值 （向量：tissues * 1） 每一个基因都含1280份组织的表达信息 （矩阵：tissues * genes ） 两者相关，每个被试得到genes个相关值 （向量：genes * 1) 重复以上过程，得到所有被试的结果 每个区域重复以上过程，得到所有区域的结果 Brain gene expression data processing Arnatkeviciute et al., 2019 工具：Re-Annotator转录组预处理 更新基因注解（Re-Annotator） intensity-based filtering排除probes 通过overlap RNA-seq和microarray来排除genes 在余下基因中，排除相关较小的基因 within-sample cross-gene and within-gene cross-sample normalization DS：consistent regional variation across donor brains 选取高一致性（DS score over 50% rank)的基因进行分析 结果: a sample × gene matrix of 1280 × 5013 (5013 genes for 1280 tissue samples) 构建FC 在AHBA的tissue sample的中心画球形来构建tissue based ROI (tsROI) 计算sub-region和tsROI的相关作为FC vector 每个区域都可以得到tissues * subjects的FC矩阵, N of samples = 1280 结果：genes * subjects * regions的相关矩阵 识别关联基因 单sub-region的结果 genes * subjects的相关矩阵做Bonferroni矫正（p&lt;0.05/5013), 被试间取90%的阈限 背景噪声检测：对以上结果做permutation检验 spatial autocorrelation correction ：BrainSMASH Gene enrichment analysis functional annotate： ToppGene portal molecular functions biological processes cellular components biological pathways and related diseases conduct tissue, cell type, and temporal specific expression analyses： online tools tissue-specific expression (TSEA) (http://genetics.wustl.edu/jdlab/tsea/)) cell type-specific expression (CSEA) tools (http://genetics.wustl.edu/jdlab/csea-tool-2/) assess the significance of the above-mentioned enrichment analyse behavioral relevance of genes related to rsFC https://neurosynth.org Protein-protein interaction analysis https://string-db.org/","link":"/post/34521/"}],"tags":[{"name":"matlab","slug":"matlab","link":"/tags/matlab/"},{"name":"SWM","slug":"SWM","link":"/tags/SWM/"},{"name":"机器学习","slug":"机器学习","link":"/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"},{"name":"认知神经","slug":"认知神经","link":"/tags/%E8%AE%A4%E7%9F%A5%E7%A5%9E%E7%BB%8F/"},{"name":"CPM","slug":"CPM","link":"/tags/CPM/"},{"name":"eeg","slug":"eeg","link":"/tags/eeg/"},{"name":"eeglab","slug":"eeglab","link":"/tags/eeglab/"},{"name":"eprime","slug":"eprime","link":"/tags/eprime/"},{"name":"静息态","slug":"静息态","link":"/tags/%E9%9D%99%E6%81%AF%E6%80%81/"},{"name":"预处理","slug":"预处理","link":"/tags/%E9%A2%84%E5%A4%84%E7%90%86/"},{"name":"css","slug":"css","link":"/tags/css/"},{"name":"网站","slug":"网站","link":"/tags/%E7%BD%91%E7%AB%99/"},{"name":"网络","slug":"网络","link":"/tags/%E7%BD%91%E7%BB%9C/"},{"name":"大数据","slug":"大数据","link":"/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/"},{"name":"实验","slug":"实验","link":"/tags/%E5%AE%9E%E9%AA%8C/"},{"name":"编程","slug":"编程","link":"/tags/%E7%BC%96%E7%A8%8B/"},{"name":"可视化","slug":"可视化","link":"/tags/%E5%8F%AF%E8%A7%86%E5%8C%96/"},{"name":"在线实验","slug":"在线实验","link":"/tags/%E5%9C%A8%E7%BA%BF%E5%AE%9E%E9%AA%8C/"},{"name":"实验程序","slug":"实验程序","link":"/tags/%E5%AE%9E%E9%AA%8C%E7%A8%8B%E5%BA%8F/"},{"name":"网络技术","slug":"网络技术","link":"/tags/%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF/"},{"name":"ptb","slug":"ptb","link":"/tags/ptb/"},{"name":"贪吃蛇","slug":"贪吃蛇","link":"/tags/%E8%B4%AA%E5%90%83%E8%9B%87/"},{"name":"circos","slug":"circos","link":"/tags/circos/"},{"name":"画图","slug":"画图","link":"/tags/%E7%94%BB%E5%9B%BE/"},{"name":"边绑定图","slug":"边绑定图","link":"/tags/%E8%BE%B9%E7%BB%91%E5%AE%9A%E5%9B%BE/"},{"name":"搬家","slug":"搬家","link":"/tags/%E6%90%AC%E5%AE%B6/"},{"name":"免费建站","slug":"免费建站","link":"/tags/%E5%85%8D%E8%B4%B9%E5%BB%BA%E7%AB%99/"},{"name":"手搓数据","slug":"手搓数据","link":"/tags/%E6%89%8B%E6%90%93%E6%95%B0%E6%8D%AE/"},{"name":"基因","slug":"基因","link":"/tags/%E5%9F%BA%E5%9B%A0/"}],"categories":[{"name":"认知神经","slug":"cognitive","link":"/categories/cognitive/"},{"name":"编程开发","slug":"programming","link":"/categories/programming/"},{"name":"网络技术","slug":"internet","link":"/categories/internet/"},{"name":"可视化","slug":"visualization","link":"/categories/visualization/"}]}